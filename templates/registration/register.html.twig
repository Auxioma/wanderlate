{% extends 'base.html.twig' %}

{% block title %}Register{% endblock %}

{% block body %}

<div class="container py-5 mt-5 mb-5">
  <div class="mx-auto" style="max-width: 900px;">
    <div class="text-center mb-4">
      <h1 class="fw-bold mb-2">Create account</h1>
      <p class="text-muted">Join Wanderlate and start your journey</p>
    </div>

    <div class="bg-white border rounded-4 p-4 p-md-5">
      {{ form_start(registrationForm, {
          attr: { class: 'vstack gap-5' }
      }) }}

        <!-- PERSONAL INFORMATION -->
        <section>
          <h2 class="h5 fw-semibold text-dark pb-2 mb-4 border-bottom">
            Personal information
          </h2>

          <div class="row g-4">

            <!-- First name -->
            <div class="col-md-6">
              <label class="form-label fw-semibold">First name</label>
              <div class="position-relative">
                <svg xmlns="http://www.w3.org/2000/svg"
                     width="20" height="20" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round"
                     stroke-linejoin="round"
                     class="position-absolute top-50 translate-middle-y ms-2 text-muted">
                  <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
                  <circle cx="12" cy="7" r="4"></circle>
                </svg>
                {{ form_widget(registrationForm.firstName) }}
              </div>
            </div>

            <!-- Last name -->
            <div class="col-md-6">
              <label class="form-label fw-semibold">Last name</label>
              <div class="position-relative">
                <svg xmlns="http://www.w3.org/2000/svg"
                     width="20" height="20" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round"
                     stroke-linejoin="round"
                     class="position-absolute top-50 translate-middle-y ms-2 text-muted">
                  <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
                  <circle cx="12" cy="7" r="4"></circle>
                </svg>
                {{ form_widget(registrationForm.LastName) }}
              </div>
            </div>

            <!-- Email -->
            <div class="col-md-6">
              <label class="form-label fw-semibold">Email</label>
              <div class="position-relative">
                <svg xmlns="http://www.w3.org/2000/svg"
                     width="20" height="20" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round"
                     stroke-linejoin="round"
                     class="position-absolute top-50 translate-middle-y ms-2 text-muted">
                  <rect width="20" height="16" x="2" y="4" rx="2"></rect>
                  <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
                </svg>
                {{ form_widget(registrationForm.email) }}
              </div>
            </div>

            <!-- Phone -->
            <div class="col-md-6">
              <label class="form-label fw-semibold">
                Phone <span class="text-danger">*</span>
              </label>
              <div class="row g-3">
                <div class="col-md-8">
                  {{ form_widget(registrationForm.phoneNumber) }}
                </div>
              </div>
              <small class="text-muted d-block mt-1">
                Format: 6 12 34 56 78
              </small>
            </div>

            <!-- Birth date -->
            <div class="col-12">
              <label class="form-label fw-semibold">Birth date</label>
              <div class="row g-3">

                <div class="col-md-4">
                  {{ form_widget(registrationForm.birthDate) }}
                </div>

              </div>
            </div>

          </div>
        </section>

        <!-- PREFERENCES -->
        <section>
          <h2 class="h5 fw-semibold text-dark pb-2 mb-4 border-bottom">
            Preferences
          </h2>

          <div class="row g-4 mb-4">

            <!-- Country -->
            <div class="col-md-4">
              <label class="form-label fw-semibold">Country</label>
              <div class="position-relative">
                <svg xmlns="http://www.w3.org/2000/svg"
                     width="20" height="20" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round"
                     stroke-linejoin="round"
                     class="position-absolute top-50 translate-middle-y ms-2 text-muted">
                  <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path>
                  <circle cx="12" cy="10" r="3"></circle>
                </svg>
                {{ form_widget(registrationForm.country) }}
                <svg xmlns="http://www.w3.org/2000/svg"
                     width="20" height="20" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round"
                     stroke-linejoin="round"
                     class="position-absolute top-50 translate-middle-y me-2 end-0 text-muted">
                  <path d="m6 9 6 6 6-6"></path>
                </svg>
              </div>
            </div>

            <!-- Language -->
            <div class="col-md-4">
              <label class="form-label fw-semibold">Language</label>
              <div class="position-relative">
                <svg xmlns="http://www.w3.org/2000/svg"
                     width="20" height="20" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round"
                     stroke-linejoin="round"
                     class="position-absolute top-50 translate-middle-y ms-2 text-muted">
                  <circle cx="12" cy="12" r="10"></circle>
                  <path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"></path>
                  <path d="M2 12h20"></path>
                </svg>
                {{ form_widget(registrationForm.lang) }}
                <svg xmlns="http://www.w3.org/2000/svg"
                     width="20" height="20" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round"
                     stroke-linejoin="round"
                     class="position-absolute top-50 translate-middle-y me-2 end-0 text-muted">
                  <path d="m6 9 6 6 6-6"></path>
                </svg>
              </div>
            </div>

            <!-- Currency -->
            <div class="col-md-4">
              <label class="form-label fw-semibold">Currency</label>
              <div class="position-relative">
                <svg xmlns="http://www.w3.org/2000/svg"
                     width="20" height="20" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round"
                     stroke-linejoin="round"
                     class="position-absolute top-50 translate-middle-y ms-2 text-muted">
                  <line x1="12" x2="12" y1="2" y2="22"></line>
                  <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                </svg>
                {{ form_widget(registrationForm.currency) }}
                <svg xmlns="http://www.w3.org/2000/svg"
                     width="20" height="20" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round"
                     stroke-linejoin="round"
                     class="position-absolute top-50 translate-middle-y me-2 end-0 text-muted">
                  <path d="m6 9 6 6 6-6"></path>
                </svg>
              </div>
            </div>

          </div>

          <!-- Account type -->
          <div class="mb-2">
            <label class="form-label fw-semibold mb-3">Account type</label>

            <div class="border rounded-3 overflow-hidden">

              <!-- Traveler -->
              <label class="d-flex p-3 border-bottom border-brand-red bg-light"
                     style="cursor:pointer;">
                <div class="form-check me-2 mt-1">
                  <input class="form-check-input"
                         type="radio"
                         name="accountType"
                         id="accountTraveler"
                         checked>
                </div>
                <div>
                  <p class="fw-semibold mb-1">Traveler</p>
                  <p class="text-muted mb-0">
                    Perfect for booking unique accommodations and discovering new destinations.
                  </p>
                </div>
              </label>

              <!-- Host -->
              <label class="d-flex p-3"
                     style="cursor:pointer;">
                <div class="form-check me-2 mt-1">
                  <input class="form-check-input"
                         type="radio"
                         name="accountType"
                         id="accountHost">
                </div>
                <div>
                  <p class="fw-semibold mb-1">Host</p>
                  <p class="text-muted mb-0">
                    Ideal for renting your property and welcoming travelers from around the world.
                  </p>
                </div>
              </label>

            </div>
          </div>
        </section>

        <!-- SECURITY -->
        <section>
          <h2 class="h5 fw-semibold text-dark pb-2 mb-4 border-bottom">
            Security
          </h2>

          <div class="vstack gap-4">

            <!-- Password -->
            <div>
              <label class="form-label fw-semibold">Password</label>
              <div class="position-relative">
                <svg xmlns="http://www.w3.org/2000/svg"
                     width="20" height="20" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round"
                     stroke-linejoin="round"
                     class="position-absolute top-50 translate-middle-y ms-2 text-muted">
                  <rect width="18" height="11" x="3" y="11" rx="2" ry="2"></rect>
                  <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                </svg>
                <input type="password"
                       class="form-control ps-5 pe-5"
                       placeholder="Minimum 6 characters"
                       required>
                <button type="button"
                        class="btn btn-link position-absolute top-50 translate-middle-y end-0 me-2 p-0 text-muted">
                  <svg xmlns="http://www.w3.org/2000/svg"
                       width="20" height="20" viewBox="0 0 24 24" fill="none"
                       stroke="currentColor" stroke-width="2" stroke-linecap="round"
                       stroke-linejoin="round">
                    <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path>
                    <circle cx="12" cy="12" r="3"></circle>
                  </svg>
                </button>
              </div>

              <!-- Strength meter -->
              <div class="mt-4 mb-3">
                <div class="progress mb-2" style="height: 4px;">
                  <div class="progress-bar bg-danger" style="width: 0%;"></div>
                </div>
                <p class="small text-muted mb-1">
                  The password must meet the following conditions:
                </p>
                <div class="small text-muted">

                  <div class="d-flex align-items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg"
                         width="16" height="16" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round" class="text-muted">
                      <path d="M18 6 6 18"></path>
                      <path d="m6 6 12 12"></path>
                    </svg>
                    <span>At least 6 characters</span>
                  </div>

                  <div class="d-flex align-items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg"
                         width="16" height="16" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round" class="text-muted">
                      <path d="M18 6 6 18"></path>
                      <path d="m6 6 12 12"></path>
                    </svg>
                    <span>At least 1 digit</span>
                  </div>

                  <div class="d-flex align-items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg"
                         width="16" height="16" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round" class="text-muted">
                      <path d="M18 6 6 18"></path>
                      <path d="m6 6 12 12"></path>
                    </svg>
                    <span>At least 1 lowercase character</span>
                  </div>

                  <div class="d-flex align-items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg"
                         width="16" height="16" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round" class="text-muted">
                      <path d="M18 6 6 18"></path>
                      <path d="m6 6 12 12"></path>
                    </svg>
                    <span>At least 1 uppercase character</span>
                  </div>

                  <div class="d-flex align-items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg"
                         width="16" height="16" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round" class="text-muted">
                      <path d="M18 6 6 18"></path>
                      <path d="m6 6 12 12"></path>
                    </svg>
                    <span>At least 1 special character (#?!@$%^&*-)</span>
                  </div>

                </div>
              </div>
            </div>

            <!-- Confirm password -->
            <div>
              <label class="form-label fw-semibold">Confirm password</label>
              <div class="position-relative">
                <svg xmlns="http://www.w3.org/2000/svg"
                     width="20" height="20" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round"
                     stroke-linejoin="round"
                     class="position-absolute top-50 translate-middle-y ms-2 text-muted">
                  <rect width="18" height="11" x="3" y="11" rx="2" ry="2"></rect>
                  <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                </svg>
                <input type="password"
                       class="form-control ps-5 pe-5"
                       placeholder="Confirm your password"
                       required>
                <button type="button"
                        class="btn btn-link position-absolute top-50 translate-middle-y end-0 me-2 p-0 text-muted">
                  <svg xmlns="http://www.w3.org/2000/svg"
                       width="20" height="20" viewBox="0 0 24 24" fill="none"
                       stroke="currentColor" stroke-width="2" stroke-linecap="round"
                       stroke-linejoin="round">
                    <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path>
                    <circle cx="12" cy="12" r="3"></circle>
                  </svg>
                </button>
              </div>
              <div class="mt-3">
                <div class="progress" style="height: 4px;">
                  <div class="progress-bar bg-secondary" style="width: 0%;"></div>
                </div>
              </div>
            </div>

            <!-- Checkboxes -->
            <div class="vstack gap-2">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="terms" required>
                <label class="form-check-label small" for="terms">
                  I accept the
                  <a href="#" class="text-brand-red text-decoration-underline">
                    terms of use
                  </a>
                  and
                  <a href="#" class="text-brand-red text-decoration-underline">
                    privacy policy
                  </a>
                </label>
              </div>

              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="marketing">
                <label class="form-check-label small" for="marketing">
                  I agree to receive marketing communications from Wanderlate
                </label>
              </div>
            </div>

          </div>
        </section>

        <!-- SUBMIT + GOOGLE SIGNUP -->
        <div class="text-center">
          <button type="submit" class="btn w-100 text-white py-3 fw-medium"
                  style="background: var(--brand-red);" disabled>
            Create my account
          </button>
        </div>

        <div class="position-relative my-3 text-center">
          <hr>
          <span class="position-absolute top-50 start-50 translate-middle bg-white px-2 text-muted small">
            or
          </span>
        </div>

        <div class="text-center">
          <button type="button"
                  class="btn btn-outline-secondary w-100 py-3 fw-medium d-flex align-items-center justify-content-center gap-2"
                  disabled>
            <svg class="me-1" width="20" height="20" viewBox="0 0 24 24">
              <path fill="#4285F4"
                    d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z">
              </path>
              <path fill="#34A853"
                    d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z">
              </path>
              <path fill="#FBBC05"
                    d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z">
              </path>
              <path fill="#EA4335"
                    d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z">
              </path>
            </svg>
            S'inscrire avec Google
          </button>
        </div>

        <div class="text-center">
          <span class="text-muted">Already have an account?</span>
          <a href="/en/login" class="ms-1 text-brand-red fw-semibold">
            Log in
          </a>
        </div>

      {{ form_end(registrationForm) }}
    </div>
  </div>
</div>

{% block javascript %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js"></script>
        <script>
        document.addEventListener('DOMContentLoaded', function () {
            const input = document.querySelector('.js-phone-input');
            if (!input) return;

            const iti = window.intlTelInput(input, {
                initialCountry: "fr",        // ou "auto" avec geoIpLookup
                separateDialCode: true,      // affiche +33 séparé
                utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js"
            });

            // Option : avant l’envoi du formulaire, on remplace la valeur par le format complet (+33...)
            const form = input.closest('form');
            form.addEventListener('submit', function () {
                // format E.164 (ex : +33612345678)
                input.value = iti.getNumber();
            });
        });
    </script>

{% endblock %}
{% block css %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css"/>

{% endblock %}

{#
    {% for flash_error in app.flashes('verify_email_error') %}
        <div class="alert alert-danger" role="alert">{{ flash_error }}</div>
    {% endfor %}

    <h1>Register</h1>

    {{ form_errors(registrationForm) }}

    {{ form_start(registrationForm) }}
        {{ form_row(registrationForm.email) }}
        {{ form_row(registrationForm.plainPassword, {
            label: 'Password'
        }) }}
        {{ form_row(registrationForm.agreeTerms) }}

        <button type="submit" class="btn">Register</button>
    {{ form_end(registrationForm) }}
#}

{% endblock %}
